!FREEMEM_7E = $7EF4A0
!FREEMEM_7F = $7FFA02

!START_FREESPACE_80 = $80CD8E
!START_FREESPACE_81 = $81EF1A
!START_FREESPACE_82 = $82F70F
!START_FREESPACE_83 = $83AD66
!START_FREESPACE_84 = $84EFD3
!START_FREESPACE_85 = $859643
!START_FREESPACE_86 = $86F4A6
!START_FREESPACE_87 = $87C964
!START_FREESPACE_88 = $88EE32
!START_FREESPACE_89 = $89AEFD
!START_FREESPACE_8A = $8AE980
!START_FREESPACE_8B = $8BF760
!START_FREESPACE_8C = $8CF3E9
!START_FREESPACE_8D = $8DFFF1
!START_FREESPACE_8E = $8EE600
!START_FREESPACE_8F = $8FE99B
!START_FREESPACE_90 = $90F63A
!START_FREESPACE_91 = $91FFEE
!START_FREESPACE_92 = $92EDF3
!START_FREESPACE_93 = $93F61D
!START_FREESPACE_94 = $94DC00
!START_FREESPACE_99 = $99EE21
!START_FREESPACE_9A = $9AFC20
!START_FREESPACE_9B = $9BCBFB
!START_FREESPACE_9C = $9CFA80
!START_FREESPACE_9D = $9DF780
!START_FREESPACE_9E = $9EF6C0
!START_FREESPACE_9F = $9FF740
!START_FREESPACE_A0 = $A0F7D3
!START_FREESPACE_A1 = $A1EBD1
!START_FREESPACE_A2 = $A2F498
!START_FREESPACE_A3 = $A3F311
!START_FREESPACE_A4 = $A4F6C0
!START_FREESPACE_A5 = $A5F95A
!START_FREESPACE_A6 = $A6FEBC
!START_FREESPACE_A7 = $A7FF82
!START_FREESPACE_A8 = $A8F9BE
!START_FREESPACE_A9 = $A9FB70
!START_FREESPACE_AA = $AAF7D3
!START_FREESPACE_AB = $ABF800
!START_FREESPACE_AC = $ACEE00
!START_FREESPACE_AD = $ADF444
!START_FREESPACE_AE = $AEFD20
!START_FREESPACE_AF = $AFEC00
!START_FREESPACE_B0 = $B0EE00
!START_FREESPACE_B2 = $B2FEAA
!START_FREESPACE_B3 = $B3ED77
!START_FREESPACE_B4 = $B4F4B8
!START_FREESPACE_B5 = $B5F000
!START_FREESPACE_B6 = $B6F200
!START_FREESPACE_B7 = $B7FD00
!START_FREESPACE_B8 = $B88000

!FREESPACE_80 = !START_FREESPACE_80
!FREESPACE_81 = !START_FREESPACE_81
!FREESPACE_82 = !START_FREESPACE_82
!FREESPACE_83 = !START_FREESPACE_83
!FREESPACE_84 = !START_FREESPACE_84
!FREESPACE_85 = !START_FREESPACE_85
!FREESPACE_86 = !START_FREESPACE_86
!FREESPACE_87 = !START_FREESPACE_87
!FREESPACE_88 = !START_FREESPACE_88
!FREESPACE_89 = !START_FREESPACE_89
!FREESPACE_8A = !START_FREESPACE_8A
!FREESPACE_8B = !START_FREESPACE_8B
!FREESPACE_8C = !START_FREESPACE_8C
!FREESPACE_8D = !START_FREESPACE_8D
!FREESPACE_8E = !START_FREESPACE_8E
!FREESPACE_8F = !START_FREESPACE_8F
!FREESPACE_90 = !START_FREESPACE_90
!FREESPACE_91 = !START_FREESPACE_91
!FREESPACE_92 = !START_FREESPACE_92
!FREESPACE_93 = !START_FREESPACE_93
!FREESPACE_94 = !START_FREESPACE_94
!FREESPACE_99 = !START_FREESPACE_99
!FREESPACE_9A = !START_FREESPACE_9A
!FREESPACE_9B = !START_FREESPACE_9B
!FREESPACE_9C = !START_FREESPACE_9C
!FREESPACE_9D = !START_FREESPACE_9D
!FREESPACE_9E = !START_FREESPACE_9E
!FREESPACE_9F = !START_FREESPACE_9F
!FREESPACE_A0 = !START_FREESPACE_A0
!FREESPACE_A1 = !START_FREESPACE_A1
!FREESPACE_A2 = !START_FREESPACE_A2
!FREESPACE_A3 = !START_FREESPACE_A3
!FREESPACE_A4 = !START_FREESPACE_A4
!FREESPACE_A5 = !START_FREESPACE_A5
!FREESPACE_A6 = !START_FREESPACE_A6
!FREESPACE_A7 = !START_FREESPACE_A7
!FREESPACE_A8 = !START_FREESPACE_A8
!FREESPACE_A9 = !START_FREESPACE_A9
!FREESPACE_AA = !START_FREESPACE_AA
!FREESPACE_AB = !START_FREESPACE_AB
!FREESPACE_AC = !START_FREESPACE_AC
!FREESPACE_AD = !START_FREESPACE_AD
!FREESPACE_AE = !START_FREESPACE_AE
!FREESPACE_AF = !START_FREESPACE_AF
!FREESPACE_B0 = !START_FREESPACE_B0
!FREESPACE_B2 = !START_FREESPACE_B2
!FREESPACE_B3 = !START_FREESPACE_B3
!FREESPACE_B4 = !START_FREESPACE_B4
!FREESPACE_B5 = !START_FREESPACE_B5
!FREESPACE_B6 = !START_FREESPACE_B6
!FREESPACE_B7 = !START_FREESPACE_B7
!FREESPACE_B8 = !START_FREESPACE_B8

!END_FREESPACE_80 = $80FFC0
!END_FREESPACE_81 = $81FF00
!END_FREESPACE_94 = $94E000
!END_FREESPACE_9B = $9BE000

!END_FREESPACE_82 = $820000+$10000
!END_FREESPACE_83 = $830000+$10000
!END_FREESPACE_84 = $840000+$10000
!END_FREESPACE_85 = $850000+$10000
!END_FREESPACE_86 = $860000+$10000
!END_FREESPACE_87 = $870000+$10000
!END_FREESPACE_88 = $880000+$10000
!END_FREESPACE_89 = $890000+$10000
!END_FREESPACE_8A = $8A0000+$10000
!END_FREESPACE_8B = $8B0000+$10000
!END_FREESPACE_8C = $8C0000+$10000
!END_FREESPACE_8D = $8D0000+$10000
!END_FREESPACE_8E = $8E0000+$10000
!END_FREESPACE_8F = $8F0000+$10000
!END_FREESPACE_90 = $900000+$10000
!END_FREESPACE_91 = $910000+$10000
!END_FREESPACE_92 = $920000+$10000
!END_FREESPACE_93 = $930000+$10000
!END_FREESPACE_99 = $990000+$10000
!END_FREESPACE_9A = $9A0000+$10000
!END_FREESPACE_9C = $9C0000+$10000
!END_FREESPACE_9D = $9D0000+$10000
!END_FREESPACE_9E = $9E0000+$10000
!END_FREESPACE_9F = $9F0000+$10000
!END_FREESPACE_A0 = $A00000+$10000
!END_FREESPACE_A1 = $A10000+$10000
!END_FREESPACE_A2 = $A20000+$10000
!END_FREESPACE_A3 = $A30000+$10000
!END_FREESPACE_A4 = $A40000+$10000
!END_FREESPACE_A5 = $A50000+$10000
!END_FREESPACE_A6 = $A60000+$10000
!END_FREESPACE_A7 = $A70000+$10000
!END_FREESPACE_A8 = $A80000+$10000
!END_FREESPACE_A9 = $A90000+$10000
!END_FREESPACE_AA = $AA0000+$10000
!END_FREESPACE_AB = $AB0000+$10000
!END_FREESPACE_AC = $AC0000+$10000
!END_FREESPACE_AD = $AD0000+$10000
!END_FREESPACE_AE = $AE0000+$10000
!END_FREESPACE_AF = $AF0000+$10000
!END_FREESPACE_B0 = $B00000+$10000
!END_FREESPACE_B2 = $B20000+$10000
!END_FREESPACE_B3 = $B30000+$10000
!END_FREESPACE_B4 = $B40000+$10000
!END_FREESPACE_B5 = $B50000+$10000
!END_FREESPACE_B6 = $B60000+$10000
!END_FREESPACE_B7 = $B70000+$10000
!END_FREESPACE_B8 = $B80000+$10000

macro VALIDATE_FREESPACE_bank(bank)
  assert !FREESPACE_<bank> >= $<bank>0000, "Freespace for bank $<bank> ($", hex(!FREESPACE_<bank>), ") ends before bank starts"
  assert !FREESPACE_<bank> < $<bank>0000+$10000, "Freespace for bank $<bank> ($", hex(!FREESPACE_<bank>), ") ends after bank ends"
  assert !FREESPACE_<bank> >= !START_FREESPACE_<bank>, "Freespace for bank $<bank> ($", hex(!FREESPACE_<bank>), ") ends before START_FREESPACE_<bank> ($", hex(!START_FREESPACE_<bank>), ")"
  assert !FREESPACE_<bank> < !END_FREESPACE_<bank>, "Freespace for bank $<bank> ($", hex(!FREESPACE_<bank>), ") ends after END_FREESPACE_<bank> ($", hex(!END_FREESPACE_<bank>), ")"
endmacro

macro VALIDATE_FREESPACE()
  %VALIDATE_FREESPACE_bank(80)
  %VALIDATE_FREESPACE_bank(81)
  %VALIDATE_FREESPACE_bank(82)
  %VALIDATE_FREESPACE_bank(83)
  %VALIDATE_FREESPACE_bank(84)
  %VALIDATE_FREESPACE_bank(85)
  %VALIDATE_FREESPACE_bank(86)
  %VALIDATE_FREESPACE_bank(87)
  %VALIDATE_FREESPACE_bank(88)
  %VALIDATE_FREESPACE_bank(89)
  %VALIDATE_FREESPACE_bank(8A)
  %VALIDATE_FREESPACE_bank(8B)
  %VALIDATE_FREESPACE_bank(8C)
  %VALIDATE_FREESPACE_bank(8D)
  %VALIDATE_FREESPACE_bank(8E)
  %VALIDATE_FREESPACE_bank(8F)
  %VALIDATE_FREESPACE_bank(90)
  %VALIDATE_FREESPACE_bank(91)
  %VALIDATE_FREESPACE_bank(92)
  %VALIDATE_FREESPACE_bank(93)
  %VALIDATE_FREESPACE_bank(99)
  %VALIDATE_FREESPACE_bank(9A)
  %VALIDATE_FREESPACE_bank(9C)
  %VALIDATE_FREESPACE_bank(9D)
  %VALIDATE_FREESPACE_bank(9E)
  %VALIDATE_FREESPACE_bank(9F)
  %VALIDATE_FREESPACE_bank(A0)
  %VALIDATE_FREESPACE_bank(A1)
  %VALIDATE_FREESPACE_bank(A2)
  %VALIDATE_FREESPACE_bank(A3)
  %VALIDATE_FREESPACE_bank(A4)
  %VALIDATE_FREESPACE_bank(A5)
  %VALIDATE_FREESPACE_bank(A6)
  %VALIDATE_FREESPACE_bank(A7)
  %VALIDATE_FREESPACE_bank(A8)
  %VALIDATE_FREESPACE_bank(A9)
  %VALIDATE_FREESPACE_bank(AA)
  %VALIDATE_FREESPACE_bank(AB)
  %VALIDATE_FREESPACE_bank(AC)
  %VALIDATE_FREESPACE_bank(AD)
  %VALIDATE_FREESPACE_bank(AE)
  %VALIDATE_FREESPACE_bank(AF)
  %VALIDATE_FREESPACE_bank(B0)
  %VALIDATE_FREESPACE_bank(B2)
  %VALIDATE_FREESPACE_bank(B3)
  %VALIDATE_FREESPACE_bank(B4)
  %VALIDATE_FREESPACE_bank(B5)
  %VALIDATE_FREESPACE_bank(B6)
  %VALIDATE_FREESPACE_bank(B7)
  %VALIDATE_FREESPACE_bank(B8)
endmacro

macro BEGIN_FREESPACE(bank)
  org !FREESPACE_<bank>
endmacro

macro END_FREESPACE(bank)
  !freespace_counter_<bank> ?= 0
  end_freespace_<bank>_!freespace_counter_<bank>:
  !FREESPACE_<bank> := end_freespace_<bank>_!freespace_counter_<bank>
  !freespace_counter_<bank> #= !freespace_counter_<bank>+1
endmacro
